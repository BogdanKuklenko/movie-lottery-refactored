# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ Render

## –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª

–Ø —Å–æ–∑–¥–∞–ª **–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É**, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –ª–æ–≥–∞—Ö Render, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ—Ä–º–æ–∑–∏—Ç –∑–∞–ø—É—Å–∫ –∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –ø–∞–º—è—Ç—å.

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `diagnostic_startup.py` 
**–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ —Å–≤–æ—ë–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
python diagnostic_startup.py
```

–ü–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–º–ø–æ—Ä—Ç
- –°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å
- –ì–¥–µ "—É–∑–∫–æ–µ –º–µ—Å—Ç–æ"

### 2. `movie_lottery/diagnostic_middleware.py`
**–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `movie_lottery/__init__.py`
–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add .
git commit -m "Add diagnostic logging for Render startup issues"
git push
```

### –®–∞–≥ 2: **–í–ê–ñ–ù–û!** –û–±–Ω–æ–≤–∏—Ç—å Start Command –Ω–∞ Render

‚ö†Ô∏è **–ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å "movie-lottery"
3. –ù–∞–∂–º–∏—Ç–µ **Settings**
4. –ù–∞–π–¥–∏—Ç–µ **Start Command**
5. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
   ```bash
   gunicorn --config gunicorn_config.py "movie_lottery:create_app()"
   ```
6. –ù–∞–∂–º–∏—Ç–µ **Save Changes**

### –®–∞–≥ 3: –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è, –≤ –ª–æ–≥–∞—Ö Render –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
[DIAGNOSTIC] üîç STARTUP DIAGNOSTICS ENABLED
[DIAGNOSTIC]    Python: 3.11.x
[DIAGNOSTIC]    Platform: linux
[DIAGNOSTIC]    PID: 123
[DIAGNOSTIC]    DATABASE_URL: Set
[DIAGNOSTIC] ================================================================
[DIAGNOSTIC] [OK] Diagnostics initialized          |   0.01s |   45.2 MB | +  0.0 MB
[DIAGNOSTIC] [OK] create_app() started             |   0.05s |   48.1 MB | +  2.9 MB
[DIAGNOSTIC] [OK] Flask instance created           |   0.12s |   52.3 MB | +  7.1 MB
[DIAGNOSTIC] [OK] Config loaded                    |   0.13s |   52.5 MB | +  7.3 MB
[DIAGNOSTIC] [OK] SQLAlchemy initialized           |   0.45s |   68.9 MB | + 23.7 MB
[DIAGNOSTIC] [OK] Flask-Migrate initialized        |   0.52s |   71.2 MB | + 26.0 MB
[DIAGNOSTIC] [OK] Models imported                  |   0.58s |   73.5 MB | + 28.3 MB
[DIAGNOSTIC] [OK] main_routes imported             |   0.65s |   76.8 MB | + 31.6 MB
[DIAGNOSTIC] [OK] api_routes imported              |   2.34s |  142.7 MB | + 97.5 MB  ‚ö†Ô∏è –ú–ï–î–õ–ï–ù–ù–û!
[DIAGNOSTIC] [OK] Blueprints registered            |   2.35s |  142.9 MB | + 97.7 MB
[DIAGNOSTIC] ================================================================
[DIAGNOSTIC] DIAGNOSTIC SUMMARY:
[DIAGNOSTIC]   Total startup time: 2.36s
[DIAGNOSTIC]   Final memory: 143.2 MB
[DIAGNOSTIC]   Memory growth: +98.0 MB
[DIAGNOSTIC] ================================================================
```

---

## üìä –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö

### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ < 15 —Å–µ–∫—É–Ω–¥
- –ü–∞–º—è—Ç—å < 300 MB
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- `[SLOW]` - —ç—Ç–∞–ø –∑–∞–Ω—è–ª > 10 —Å–µ–∫—É–Ω–¥
- `[HIGH_MEMORY]` - –ø–∞–º—è—Ç—å > 400 MB
- `‚ö†Ô∏è approaching timeout!` - —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç timeout
- `‚ö†Ô∏è approaching 512 MB limit!` - —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –ø–∞–º—è—Ç—å

### üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
- `üö® CRITICAL: Startup time > 30s` - –ø—Ä–µ–≤—ã—à–µ–Ω —Ç–∞–π–º–∞—É—Ç
- `üö® CRITICAL: Memory > 450 MB` - –ø–∞–º—è—Ç—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è

---

## üîß –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### –ï—Å–ª–∏ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ > 30 —Å–µ–∫—É–Ω–¥:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Start Command –Ω–∞ Render** - –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å `gunicorn_config.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ timeout = 300 —Å–µ–∫—É–Ω–¥
3. –ù–∞–π–¥–∏—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤ –ª–æ–≥–∞—Ö –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –µ–≥–æ

### –ï—Å–ª–∏ –ø–∞–º—è—Ç—å > 400 MB:
1. –ù–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö, –∫–∞–∫–æ–π –∏–º–ø–æ—Ä—Ç "—Å—ä–µ–¥–∞–µ—Ç" –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–∞–º—è—Ç–∏
2. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ lazy import (–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ)
3. –û—Ç–∫–ª—é—á–∏—Ç–µ Flask-Migrate –Ω–∞ production
4. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ upgrade –ø–ª–∞–Ω–∞ –Ω–∞ Render

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å:
–ù–∞–ø—Ä–∏–º–µ—Ä: `api_routes imported | 25.34s | 380.2 MB`

–ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è. –ù—É–∂–Ω–æ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `api_routes.py`
2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—è–∂—ë–ª—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–π (lazy import)
3. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

---

## üí° –ü—Ä–∏–º–µ—Ä: –ö–∞–∫ —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏

```
[DIAGNOSTIC] [SLOW] api_routes imported | 28.34s | 420.5 MB | +375.3 MB
[DIAGNOSTIC] ‚ö†Ô∏è  Checkpoint 'api_routes imported' took 28.3s - approaching timeout!
[DIAGNOSTIC] ‚ö†Ô∏è  Memory usage 421 MB - approaching 512 MB limit!
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- –ò–º–ø–æ—Ä—Ç `api_routes` –∑–∞–Ω—è–ª 28.3 —Å–µ–∫—É–Ω–¥—ã ‚ùå
- –ü–æ—Ç—Ä–µ–±–∏–ª 375 MB –ø–∞–º—è—Ç–∏ ‚ùå
- –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞! üéØ

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª `movie_lottery/routes/api_routes.py`:
- –ö–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –æ–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç?
- –ú–æ–∂–Ω–æ –ª–∏ –∏—Ö –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å "–ª–µ–Ω–∏–≤–æ"?
- –ï—Å—Ç—å –ª–∏ –Ω–µ–Ω—É–∂–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã?

---

## üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –º–Ω–µ

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ –≤ Render
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é —Å `[DIAGNOSTIC]`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï —Å—Ç—Ä–æ–∫–∏ —Å `[DIAGNOSTIC]`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ

–Ø —É–≤–∏–∂—É:
- –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø
- –°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å
- –ì–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞
- –ß—Ç–æ –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º, –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python diagnostic_startup.py
```

–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ (< 5 —Å–µ–∫—É–Ω–¥), –Ω–æ –Ω–∞ Render –º–µ–¥–ª–µ–Ω–Ω–æ (> 30 —Å–µ–∫—É–Ω–¥), –ø—Ä–æ–±–ª–µ–º–∞ –≤:
- –ú–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ Render (–¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤)
- –ú–µ–¥–ª–µ–Ω–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ free tier

---

## üéØ –ì–ª–∞–≤–Ω–æ–µ

**–î–í–ê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–• –î–ï–ô–°–¢–í–ò–Ø:**

1. ‚úÖ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –∫–æ–¥ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
2. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å Start Command –Ω–∞ Render** –Ω–∞:
   ```
   gunicorn --config gunicorn_config.py "movie_lottery:create_app()"
   ```

–ë–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ —à–∞–≥–∞ - timeout –±—É–¥–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è 30 —Å–µ–∫—É–Ω–¥!

---

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ó–∞–ø—É—à–∏—Ç—å –Ω–∞ GitHub
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Start Command –Ω–∞ Render
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è
- [ ] –û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏
- [ ] –ù–∞–π—Ç–∏ —Å–µ–∫—Ü–∏—é `[DIAGNOSTIC]`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è —Å–º–æ–≥—É —Ç–æ—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –≥–¥–µ –ø—Ä–æ–±–ª–µ–º–∞ –∏ –∫–∞–∫ –µ—ë —Ä–µ—à–∏—Ç—å! üöÄ

