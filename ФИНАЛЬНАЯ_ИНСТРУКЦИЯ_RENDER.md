# üö® –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ worker timeout –Ω–∞ Render

**–î–∞—Ç–∞:** 1 –æ–∫—Ç—è–±—Ä—è 2025, 23:58  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è - —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—è

---

## üìä **–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–∏–∑ –ª–æ–≥–æ–≤):**

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**
```
[DIAGNOSTIC] Total startup time: 0.80s
[DIAGNOSTIC] Final memory: 64.0 MB
```
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞ < 1 —Å–µ–∫—É–Ω–¥—ã
- –ü–∞–º—è—Ç—å –≤—Å–µ–≥–æ 64 MB
- Circuit Breaker –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

### ‚ùå **–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
Connection to 109.110.37.194 timed out. (connect timeout=3)  ‚Üê 5+ –ø–æ–ø—ã—Ç–æ–∫!
[CRITICAL] WORKER TIMEOUT (pid:84)                            ‚Üê –ß–µ—Ä–µ–∑ 30 —Å–µ–∫!
```
- qBittorrent (109.110.37.194) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (5+)
- Worker timeout **–≤—Å—ë –µ—â—ë 30 —Å–µ–∫—É–Ω–¥** –≤–º–µ—Å—Ç–æ 300

---

## üéØ **–î–í–ï –ü–†–û–ë–õ–ï–ú–´:**

### **–ü—Ä–æ–±–ª–µ–º–∞ #1: Start Command –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω**
Worker timeout = 30 —Å–µ–∫—É–Ω–¥ ‚Üí `gunicorn_config.py` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è!

### **–ü—Ä–æ–±–ª–µ–º–∞ #2: Health check —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç qBittorrent**
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Gunicorn –¥–µ–ª–∞–µ—Ç health check ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ qBittorrent ‚Üí –º–Ω–æ–∂–µ—Å—Ç–≤–æ timeouts

---

## ‚úÖ **–†–ï–®–ï–ù–ò–ï (—à–∞–≥ –∑–∞ —à–∞–≥–æ–º):**

### **–®–ê–ì 1: –û—Ç–∫–ª—é—á–∏—Ç—å qBittorrent –Ω–∞ Render (–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!)**

–≠—Ç–æ **–∫—Ä–∏—Ç–∏—á–Ω–æ** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∞–π—Ç–∞!

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å "movie-lottery"
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Environment**
4. –ù–∞–π–¥–∏—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ **—É–¥–∞–ª–∏—Ç–µ –∏—Ö** (–∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è):
   - `QBIT_HOST` ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º
   - `QBIT_PORT` ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º  
   - `QBIT_USERNAME` ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º
   - `QBIT_PASSWORD` ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º

5. –ù–∞–∂–º–∏—Ç–µ **Save Changes**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –ù–ï –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ qBittorrent –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ!

---

### **–®–ê–ì 2: –û–±–Ω–æ–≤–∏—Ç—å Start Command (–∫—Ä–∏—Ç–∏—á–Ω–æ!)**

1. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –≤ Render Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings**
3. –ù–∞–π–¥–∏—Ç–µ **Start Command**
4. **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
   ```bash
   gunicorn "movie_lottery:create_app()"
   ```

5. **–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:**
   ```bash
   gunicorn --timeout 300 --workers 1 --worker-connections 100 --bind 0.0.0.0:$PORT "movie_lottery:create_app()"
   ```

6. –ù–∞–∂–º–∏—Ç–µ **Save Changes**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Worker timeout –±—É–¥–µ—Ç 300 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 30!

---

### **–®–ê–ì 3: –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è**

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (2-3 –º–∏–Ω—É—Ç—ã).

---

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π—Ç–µ **Logs** –∏ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

‚úÖ **–£—Å–ø–µ—Ö:**
```
[DIAGNOSTIC] Total startup time: 0.80s
[DIAGNOSTIC] Final memory: 64.0 MB
[DIAGNOSTIC] qBittorrent –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (credentials –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)  ‚Üê –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
[INFO] Booting worker with pid: 123
==> Your service is live üéâ
```

‚ùå **–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
Connection to 109.110.37.194 timed out
[CRITICAL] WORKER TIMEOUT
[ERROR] Worker was sent SIGKILL
```

---

## üéØ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**

### **1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç:**
```
https://movie-lottery.onrender.com
```

–î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è **–ë–ï–ó –∑–∞–≤–∏—Å–∞–Ω–∏–π!**

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint:**
```
https://movie-lottery.onrender.com/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"status": "ok"}`

### **3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ª–æ—Ç–µ—Ä–µ—é:**
- –î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º—ã
- –°–æ–∑–¥–∞–π—Ç–µ –ª–æ—Ç–µ—Ä–µ—é
- –í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å (–∫—Ä–æ–º–µ —Ñ—É–Ω–∫—Ü–∏–π qBittorrent)

---

## üìã **–ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å / –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å:**

### ‚úÖ **–ë—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ —á–µ—Ä–µ–∑ –ö–∏–Ω–æ–ø–æ–∏—Å–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ—Ç–µ—Ä–µ–∏
- –†–æ–∑—ã–≥—Ä—ã—à –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- –ò—Å—Ç–æ—Ä–∏—è –ª–æ—Ç–µ—Ä–µ–π
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ñ–∏–ª—å–º–æ–≤
- –†—É—á–Ω–æ–π –≤–≤–æ–¥ magnet-—Å—Å—ã–ª–æ–∫

### ‚ùå **–ù–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–ø–æ–∫–∞ qBittorrent –æ—Ç–∫–ª—é—á–µ–Ω):**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∑–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ –≤ qBittorrent
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "—Ç–æ—Ä—Ä–µ–Ω—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ"

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ñ—É–Ω–∫—Ü–∏–∏ qBittorrent –ø—Ä–æ—Å—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.

---

## üîÑ **–ö–æ–≥–¥–∞ –∑–∞—Ö–æ—Ç–∏—Ç–µ –≤–∫–ª—é—á–∏—Ç—å qBittorrent –æ–±—Ä–∞—Ç–Ω–æ:**

### **1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ qBittorrent –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
curl http://109.110.37.194:–ü–û–†–¢/api/v2/app/version
```

–ï—Å–ª–∏ timeout ‚Üí qBittorrent –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ.

### **2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ Render:**
- `QBIT_HOST` = `109.110.37.194`
- `QBIT_PORT` = `–≤–∞—à_–ø–æ—Ä—Ç` (–Ω–∞–ø—Ä–∏–º–µ—Ä 8080)
- `QBIT_USERNAME` = `–≤–∞—à_–ª–æ–≥–∏–Ω`
- `QBIT_PASSWORD` = `–≤–∞—à_–ø–∞—Ä–æ–ª—å`

### **3. –ë–ª–∞–≥–æ–¥–∞—Ä—è Circuit Breaker:**
- –ï—Å–ª–∏ qBittorrent –¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ï—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí —Å–∞–π—Ç –Ω–µ –∑–∞–≤–∏—Å–Ω–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ degraded mode

---

## üí° **–ü–æ—á–µ–º—É —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **–†–∞–Ω—å—à–µ:**
```
Worker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
  ‚Üì
Gunicorn health check ‚Üí –∑–∞–ø—Ä–æ—Å –∫ "/"
  ‚Üì
–ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ qBittorrent
  ‚Üì
5+ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ 3+ —Å–µ–∫—É–Ω–¥ = 15+ —Å–µ–∫—É–Ω–¥
  ‚Üì
Worker timeout —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ ‚Üí SIGKILL
  ‚Üì
–¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
```

### **–°–µ–π—á–∞—Å (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):**
```
Worker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
  ‚Üì
Gunicorn health check ‚Üí –∑–∞–ø—Ä–æ—Å –∫ "/"
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: qBittorrent credentials –µ—Å—Ç—å? ‚Üí –ù–ï–¢
  ‚Üì
–í–æ–∑–≤—Ä–∞—Ç –ø—É—Å—Ç–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ë–ï–ó –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (0 —Å–µ–∫)
  ‚Üì
Worker –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ
  ‚Üì
Worker timeout —á–µ—Ä–µ–∑ 300 —Å–µ–∫—É–Ω–¥ (–æ–≥—Ä–æ–º–Ω—ã–π –∑–∞–ø–∞—Å)
  ‚Üì
–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! üéâ
```

---

## üö® **–ï–°–õ–ò –ü–†–û–ë–õ–ï–ú–ê –û–°–¢–ê–Å–¢–°–Ø:**

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Start Command –æ–±–Ω–æ–≤–∏–ª—Å—è:**

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
==> Running 'gunicorn --timeout 300 --workers 1 ...'
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ:
```
==> Running 'gunicorn "movie_lottery:create_app()"'
```
‚Üí Start Command **–ù–ï –æ–±–Ω–æ–≤–∏–ª—Å—è!** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:

```bash
python -m gunicorn --timeout 300 --workers 1 --bind 0.0.0.0:$PORT "movie_lottery:create_app()"
```

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Environment Variables:**

–í Render ‚Üí Environment ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- `QBIT_HOST` —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è
- `QBIT_PORT` —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è
- `QBIT_USERNAME` —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è
- `QBIT_PASSWORD` —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è

### **3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –Ω–æ–≤—ã–µ –ª–æ–≥–∏:**

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï —Å—Ç—Ä–æ–∫–∏ —Å `[DIAGNOSTIC]` –ø–æ—Å–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–µ–ø–ª–æ—è.

---

## ‚úÖ **Checklist:**

- [ ] –£–¥–∞–ª–∏—Ç—å/–æ—á–∏—Å—Ç–∏—Ç—å QBIT_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ Render
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Start Command –Ω–∞ Render
- [ ] Save Changes
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è (2-3 –º–∏–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –Ω–µ—Ç "Connection to 109.110.37.194"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –Ω–µ—Ç "WORKER TIMEOUT"
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å /health endpoint

---

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

```
‚úÖ –°–∞–π—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞ < 1 —Å–µ–∫—É–Ω–¥—ã
‚úÖ Worker –Ω–µ —É–±–∏–≤–∞–µ—Ç—Å—è
‚úÖ –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
‚úÖ –ù–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ qBittorrent
‚úÖ –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑ qBittorrent —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç–ª–∏—á–Ω–æ
```

**–°–∞–π—Ç –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π!** üöÄ

---

**–°–¥–µ–ª–∞–π—Ç–µ —ç—Ç–∏ –¥–≤–∞ —à–∞–≥–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –Ω–æ–≤—ã–µ –ª–æ–≥–∏!** üìã

